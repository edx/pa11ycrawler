<%inherit file="base.html" />
<%namespace name="summary" file="summary.html"/>
<div class="col-sm-2 col-sm-offset-10" style="padding-top: 10px;">
    <a href="index.html">Back to Index</a>
</div>

<div class="col-sm-10 col-sm-offset-1">
<h1>Accessibility Audit Summary by Code</h1>
</div>

${summary.make_summary_toolbar(
    counts_by_type['error'],
    counts_by_type['warning'],
    counts_by_type['notice'],
    counts_by_type['total'],
)}

<br />
<div class="col-sm-10 col-sm-offset-1" style="margin-bottom: 30px;">
<table data-classes='table table-no-bordered'
    data-toggle="table"
    data-search="true">
    <thead>
        <tr>
            <th data-field='Type' data-sortable="true">Type</th>
            <th data-field='Code' data-sortable="true">Results Link</th>
            <th data-field='Message' data-sortable="true">Message</th>
            <th data-field='Pages Affected'>Pages Affected</th>
            <th data-field='Docs' data-sortable="true">Docs</th>
        </tr>
    </thead>
    <tbody>
        % for code,result in results.iteritems():
            ${makerow(code, result, color_classes)}
        % endfor
    </tbody>
</table>
</div>

<%def name="makerow(code, result, color_classes)">
    <tr>
        <td class="${color_classes[result['type']]}">${result['type']}</td>
        <td> ${get_code_info(code)['base_code']} </td>
        <td> ${result['message']} </td>
        <td>
            % for page in result['pages']:
                <a href="${page[1]}">${page[0]}</a><br />
            % endfor
        </td>
        <td>
        % for sub_code, href in get_code_info(code)['doc_links'].iteritems():
            <a href="${href}"><span class='sr-only'>Docs for </span>${sub_code}</a>
        % endfor
        </td>
    </tr>
</%def>
